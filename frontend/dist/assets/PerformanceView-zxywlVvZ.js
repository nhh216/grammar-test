import{a as w,_ as A}from"./LoadingSpinner.vue_vue_type_script_setup_true_lang-DLzKQwwZ.js";import{d as E,b as S,e as a,a as e,c as q,F as d,i as k,w as C,t as r,m as g,h as p,g as u,f as m,p as z,j as h,k as B,r as D,o as n,n as F}from"./index-BOofV5PH.js";const Y={class:"max-w-4xl mx-auto px-4 py-8"},G={key:0,class:"text-center py-16 bg-white rounded-2xl border border-gray-200"},H={class:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-8"},K={class:"bg-white rounded-xl border border-gray-200 p-4 text-center"},M={class:"text-2xl font-bold text-blue-600"},$={class:"bg-white rounded-xl border border-gray-200 p-4 text-center"},J={class:"text-2xl font-bold text-gray-800"},O={class:"bg-white rounded-xl border border-gray-200 p-4 text-center"},Q={class:"bg-white rounded-xl border border-gray-200 p-4 text-center"},R={class:"text-2xl font-bold text-gray-800"},U={class:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-2xl p-6 mb-8 text-white"},W={class:"flex items-center justify-between mb-4"},X=["disabled"],Z={key:0,class:"text-blue-100 text-sm animate-pulse"},ee={class:"flex items-start gap-3 mb-4"},te={class:"bg-white/20 text-white text-sm font-semibold px-3 py-1 rounded-full whitespace-nowrap"},se={class:"text-blue-50 text-sm leading-relaxed"},le={class:"grid sm:grid-cols-2 gap-4"},ne={key:0,class:"bg-white/10 rounded-xl p-4"},ae={class:"space-y-1"},re={key:1,class:"bg-white/10 rounded-xl p-4"},oe={class:"space-y-1"},ie={key:0,class:"mt-4 bg-white/10 rounded-xl p-4"},de={class:"space-y-2"},ue={class:"font-bold text-white mt-0.5"},ce={key:1,class:"mt-4 bg-white/10 rounded-xl p-4"},xe={class:"text-xs text-blue-100 leading-relaxed"},ge={key:2,class:"text-red-200 text-sm"},me={class:"bg-white rounded-2xl border border-gray-200 overflow-hidden"},he={class:"divide-y divide-gray-50"},be={class:"flex items-center gap-3"},pe={class:"flex-1 min-w-0"},ve={class:"flex items-center justify-between mb-1.5 gap-2"},ye={class:"flex items-center gap-1.5 min-w-0"},fe={class:"text-sm font-medium text-gray-800 truncate"},_e=["title"],we={class:"text-sm font-semibold text-gray-700 flex-shrink-0"},ke={class:"w-full bg-gray-100 rounded-full h-1.5"},Ce={class:"flex flex-wrap items-center gap-x-3 gap-y-0.5 mt-1 text-xs text-gray-400"},Be={key:0},Ve=E({__name:"PerformanceView",setup(Te){const o=h(null),i=h(null),y=h(!0),c=h(!1),b=h(null),T=B(()=>{var l;return((l=o.value)==null?void 0:l.topics.filter(t=>t.sessions_completed>0).length)??0}),I=B(()=>{if(!o.value)return[];const l={weak:0,moderate:1,untested:2,strong:3};return[...o.value.topics].sort((t,x)=>{const s=l[t.level]-l[x.level];return s!==0?s:t.accuracy_pct-x.accuracy_pct})});S(async()=>{try{o.value=await w.getPerformance(),o.value.has_data&&v()}catch(l){console.error(l)}finally{y.value=!1}});async function v(){c.value=!0,b.value=null;try{i.value=await w.getInsights()}catch(l){b.value=l instanceof Error?l.message:"KhÃ´ng thá»ƒ táº£i Ä‘Ã¡nh giÃ¡ AI."}finally{c.value=!1}}function L(l){return l>=80?"text-green-600":l>=60?"text-yellow-600":"text-red-500"}function V(l){return{weak:"bg-red-400",moderate:"bg-yellow-400",strong:"bg-green-500",untested:"bg-gray-300"}[l]??"bg-gray-300"}function N(l){return{weak:"bg-red-400",moderate:"bg-yellow-400",strong:"bg-green-500",untested:"bg-gray-200"}[l]??"bg-gray-200"}function j(l){return{weak:"bg-red-100 text-red-700",moderate:"bg-yellow-100 text-yellow-700",strong:"bg-green-100 text-green-700",untested:"bg-gray-100 text-gray-500"}[l]??"bg-gray-100 text-gray-500"}function P(l){return{weak:"Yáº¿u",moderate:"Trung bÃ¬nh",strong:"Tá»‘t",untested:"ChÆ°a há»c"}[l]??l}function f(l){return{improving:"Äang tiáº¿n bá»™",declining:"CÃ³ dáº¥u hiá»‡u giáº£m",stable:"á»”n Ä‘á»‹nh",new:""}[l]??""}return(l,t)=>{const x=D("router-link");return n(),a("div",Y,[t[17]||(t[17]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl sm:text-3xl font-bold text-gray-900"},"PhÃ¢n tÃ­ch nÄƒng lá»±c"),e("p",{class:"text-gray-500 mt-2"},"ÄÃ¡nh giÃ¡ Ä‘iá»ƒm máº¡nh, Ä‘iá»ƒm yáº¿u vÃ  gá»£i Ã½ cáº£i thiá»‡n")],-1)),y.value?(n(),q(A,{key:0,message:"Äang táº£i dá»¯ liá»‡u..."})):o.value?(n(),a(d,{key:1},[o.value.has_data?(n(),a(d,{key:1},[e("div",H,[e("div",K,[e("div",M,r(o.value.total_sessions),1),t[4]||(t[4]=e("div",{class:"text-xs text-gray-500 mt-1"},"BÃ i Ä‘Ã£ lÃ m",-1))]),e("div",$,[e("div",J,r(o.value.total_questions_answered),1),t[5]||(t[5]=e("div",{class:"text-xs text-gray-500 mt-1"},"CÃ¢u há»i",-1))]),e("div",O,[e("div",{class:g(["text-2xl font-bold",L(o.value.overall_accuracy)])},r(o.value.overall_accuracy)+"% ",3),t[6]||(t[6]=e("div",{class:"text-xs text-gray-500 mt-1"},"Äá»™ chÃ­nh xÃ¡c",-1))]),e("div",Q,[e("div",R,r(T.value)+"/"+r(o.value.topics.length),1),t[7]||(t[7]=e("div",{class:"text-xs text-gray-500 mt-1"},"Chá»§ Ä‘á» Ä‘Ã£ há»c",-1))])]),e("div",U,[e("div",W,[t[8]||(t[8]=e("h2",{class:"text-lg font-bold"},"ğŸ¤– ÄÃ¡nh giÃ¡ tá»« AI Coach",-1)),e("button",{class:"text-xs bg-white/20 hover:bg-white/30 px-3 py-1.5 rounded-lg transition-colors font-medium",disabled:c.value,onClick:v},r(c.value?"Äang phÃ¢n tÃ­ch...":"â†» LÃ m má»›i"),9,X)]),c.value?(n(),a("div",Z," AI Ä‘ang phÃ¢n tÃ­ch dá»¯ liá»‡u cá»§a báº¡n... ")):i.value?(n(),a(d,{key:1},[e("div",ee,[e("span",te,r(i.value.overall_level),1),e("p",se,r(i.value.summary),1)]),e("div",le,[i.value.weak_topics.length?(n(),a("div",ne,[t[10]||(t[10]=e("h3",{class:"text-sm font-semibold mb-2"},"âš ï¸ Cáº§n cáº£i thiá»‡n",-1)),e("ul",ae,[(n(!0),a(d,null,p(i.value.weak_topics,s=>(n(),a("li",{key:s,class:"text-xs text-blue-100 flex items-center gap-1.5"},[t[9]||(t[9]=e("span",{class:"w-1.5 h-1.5 bg-red-300 rounded-full flex-shrink-0"},null,-1)),m(" "+r(s),1)]))),128))])])):u("",!0),i.value.strong_topics.length?(n(),a("div",re,[t[12]||(t[12]=e("h3",{class:"text-sm font-semibold mb-2"},"âœ… Äiá»ƒm máº¡nh",-1)),e("ul",oe,[(n(!0),a(d,null,p(i.value.strong_topics,s=>(n(),a("li",{key:s,class:"text-xs text-blue-100 flex items-center gap-1.5"},[t[11]||(t[11]=e("span",{class:"w-1.5 h-1.5 bg-green-300 rounded-full flex-shrink-0"},null,-1)),m(" "+r(s),1)]))),128))])])):u("",!0)]),i.value.recommendations.length?(n(),a("div",ie,[t[13]||(t[13]=e("h3",{class:"text-sm font-semibold mb-2"},"ğŸ’¡ Gá»£i Ã½ há»c táº­p",-1)),e("ul",de,[(n(!0),a(d,null,p(i.value.recommendations,(s,_)=>(n(),a("li",{key:_,class:"text-xs text-blue-100 flex items-start gap-2"},[e("span",ue,r(_+1)+".",1),e("span",null,r(s),1)]))),128))])])):u("",!0),i.value.study_plan?(n(),a("div",ce,[t[14]||(t[14]=e("h3",{class:"text-sm font-semibold mb-1"},"ğŸ“… Lá»™ trÃ¬nh Ä‘á» xuáº¥t",-1)),e("p",xe,r(i.value.study_plan),1)])):u("",!0)],64)):b.value?(n(),a("div",ge,[m(r(b.value)+" ",1),e("button",{class:"ml-2 underline",onClick:v},"Thá»­ láº¡i")])):u("",!0)]),e("div",me,[t[16]||(t[16]=z('<div class="px-4 sm:px-6 py-4 border-b border-gray-100"><div class="flex items-center justify-between gap-2"><h2 class="font-semibold text-gray-800 shrink-0">Chi tiáº¿t theo chá»§ Ä‘á»</h2><div class="flex gap-2 sm:gap-3 text-xs text-gray-500"><span class="flex items-center gap-1"><span class="w-2 h-2 sm:w-2.5 sm:h-2.5 rounded-full bg-red-400 inline-block flex-shrink-0"></span><span class="hidden sm:inline">Yáº¿u &lt;60%</span><span class="sm:hidden">&lt;60</span></span><span class="flex items-center gap-1"><span class="w-2 h-2 sm:w-2.5 sm:h-2.5 rounded-full bg-yellow-400 inline-block flex-shrink-0"></span><span class="hidden sm:inline">TB 60-79%</span><span class="sm:hidden">60-79</span></span><span class="flex items-center gap-1"><span class="w-2 h-2 sm:w-2.5 sm:h-2.5 rounded-full bg-green-500 inline-block flex-shrink-0"></span><span class="hidden sm:inline">Tá»‘t â‰¥80%</span><span class="sm:hidden">â‰¥80</span></span></div></div></div>',1)),e("div",he,[(n(!0),a(d,null,p(I.value,s=>(n(),a("div",{key:s.topic_id,class:"px-4 sm:px-6 py-3 sm:py-4 hover:bg-gray-50 transition-colors"},[e("div",be,[e("span",{class:g(["w-2.5 h-2.5 rounded-full flex-shrink-0",V(s.level)])},null,2),e("div",pe,[e("div",ve,[e("div",ye,[e("span",fe,r(s.topic_name),1),e("span",{class:g(["text-xs px-1.5 py-0.5 rounded-full font-medium flex-shrink-0",j(s.level)])},r(P(s.level)),3),s.trend!=="new"&&s.trend!=="stable"?(n(),a("span",{key:0,class:"text-xs flex-shrink-0",title:f(s.trend)},r(s.trend==="improving"?"â†‘":"â†“"),9,_e)):u("",!0)]),e("span",we,r(s.sessions_completed===0?"â€”":s.accuracy_pct+"%"),1)]),e("div",ke,[e("div",{class:g(["h-1.5 rounded-full transition-all duration-500",N(s.level)]),style:F({width:s.sessions_completed===0?"0%":s.accuracy_pct+"%"})},null,6)]),e("div",Ce,[s.sessions_completed===0?(n(),a("span",Be,"ChÆ°a lÃ m bÃ i")):(n(),a(d,{key:1},[e("span",null,r(s.sessions_completed)+" bÃ i",1),e("span",null,r(s.total_correct)+"/"+r(s.total_questions)+" Ä‘Ãºng",1),s.trend!=="new"?(n(),a("span",{key:0,class:g(s.trend==="improving"?"text-green-500":s.trend==="declining"?"text-red-400":"text-gray-400")},r(f(s.trend)),3)):u("",!0)],64))])]),k(x,{to:{name:"topic",params:{slug:s.slug}},class:"flex-shrink-0 text-xs text-blue-600 hover:text-blue-800 font-medium border border-blue-200 hover:border-blue-400 px-2 py-1 rounded-lg transition-colors"},{default:C(()=>[...t[15]||(t[15]=[m(" Luyá»‡n â†’ ",-1)])]),_:1},8,["to"])])]))),128))])])],64)):(n(),a("div",G,[t[1]||(t[1]=e("div",{class:"text-5xl mb-4"},"ğŸ“Š",-1)),t[2]||(t[2]=e("h2",{class:"text-xl font-semibold text-gray-700 mb-2"},"ChÆ°a cÃ³ dá»¯ liá»‡u",-1)),t[3]||(t[3]=e("p",{class:"text-gray-500 mb-6"},"HoÃ n thÃ nh Ã­t nháº¥t má»™t bÃ i thi Ä‘á»ƒ xem phÃ¢n tÃ­ch nÄƒng lá»±c",-1)),k(x,{to:{name:"home"},class:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors"},{default:C(()=>[...t[0]||(t[0]=[m(" Báº¯t Ä‘áº§u luyá»‡n thi â†’ ",-1)])]),_:1})]))],64)):u("",!0)])}}});export{Ve as default};
